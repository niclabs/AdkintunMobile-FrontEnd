<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Adkintun - Mapa </title>

  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <script src="http://d3js.org/topojson.v1.min.js"></script>
  <script src="{{ url_for('static', filename='js/d3.v3.js') }}"></script>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
      #map {
      height: 100%;
    }
  </style>
</head>

<script type=text/javascript>
  $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
</script>

<body>

  <div id="map"></div>

<script>
    function initMap() {
        var Santiago = {lat: 	-33.447487, lng: -70.673676};

        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 8,
          center: Santiago,
        });
        var url = $SCRIPT_ROOT+"/getAntennas";
        var jqxhr = $.getJSON(url, function() {})
                .done(function(data) {
                    size = data.length;
                    markers = [];
                    for (var i = 0; i < size; i++) {
                        markers.push(new google.maps.LatLng(data[i].lat, data[i].lon));
                    }

                    var heatmap = new google.maps.visualization.HeatmapLayer({
                        data: markers,
                        map: map
                    });
                });
    }
</script>

 <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD6Ot4ODflFdqkPttmKo1d2D-uWzATR_mA&libraries=visualization&callback=initMap">
  </script>
</body>

</html>
